---
title: "Dibalik Aplikasi Jadwal Pemadatan"
date: "2020-10-05"
dateString: "10 April 2020"
path: "/dibalik-aplikasi-jadwal-pemadatan"
published: "true"
---

Covid-19 sialan ini rupanya berimbas ke banyak aspek kehidupan orang-orang. Salah satunya adalah pemadatan kuliah yang udah dilakuin sama banyak universitas di seluruh negeri. Pemadatan berarti jadwal yang kita udah mulai lumayan terbiasa di bulan pertama kuliah juga berubah drastis. Masalahnya adalah jadwal yang dikasih dari pihak kampus di prodi ku itu kaya tai sumpah. Bayangin dokumen excel discreenshot dimasukin ke word terus discale biar pas sama kertasnya. Gak hanya tulisannya gepeng, tulisannya juga kecil dan susah dibaca. Ke tai an jadwal ini belum selesai di sini. Jadwal yang ditulis pun bukan nama matkulnya, tapi ditulis dengan format nama panggilan dosen garis miring singkatan nama matkul garis miring semester dan kelas garis miring jumlah sks. Ini gak hanya susah dibaca, tapi juga membuat mahasiswa bingung dan harus nebak-nebak apa maksud singkatan yang ditulis di jadwalnya karna gak semua nama matkul itu cocok dijadiin singkatan. Ini juga menurutku salah fokus untuk memprioritaskan nama dosen ketimbang nama matkulnya, karna aku lebih peduli sama nama matkul daripada nama dosen yang ngajar.

Tentu aja semua masalah itu bisa selesai dengan bikin jadwal sendiri kan ya. Tapi entah kenapa aku tep merasa ribet karna kalo bikin jadwal sendiri nanti tiap kali mau liat jadwal harus buka dokumen di hp, harus nyari hari ini hari apa buat liat jadwalnya, dll. Aku pengen sesuatu yang lebih confinient, dan kepikiranlah untuk buat progressive web app jadwal ini, sesuatu yang simpel tinggal sekali klik bisa liat jadwal hari ini apa aja. Iya aneh emang, males bikin jadwal sendiri di Word yang 5 menit kelar tapi lebih mending bikin aplikasi yang butuh berjam jam buat selesai. Sebenernya ini karna aku awalnya cuma pengen bikin buat kelas sendiri, tapi di tengah jalan malah bikin buat semua kelas se prodi wkwk. Proses paling awal dimulai dari Adobe XD buat design UI nya. Entah kenapa aku gak bisa koding kalo gak ada desainnya dulu. Setelah jadi, aku bikin template HTML dan CSS yang nantinya bakal diisi data beneran. Aku juga secara manual ngonversiin jadwal tadi jadi Javascript Object yang nantinya bakal jadi data utama buat ngisi kontennya.

`gist:Asebodi/1a5916d136b2f7abdb09cea624665a55#sem6a.js`

Itu adalah salah satu contoh data buat semester 6 kelas A. Nulis per kelas butuh mungkin 20 menit apa ya. Inilah kenapa aku awalnya cuma pengen bikin buat kelasku sendiri. Tapi setelah dipikir ah mending semua aja sekalian, biar bisa dipake orang lain juga. Akhirnya mungkin ada 2 jam sendiri bikin jadwal dalam format begini. Abis nggunain banyak API di project Covid-19 Monitor kemaren, tiap kali berurusan dengan data aku selalu kepikiran sama cara kerja JSON API, jadi disini juga aku bikin seolah olah ngambil data dari API. Sebenernya bisa aja aku bikin dokumen JSON langsung ketimbang bikin dokumen JS yang terus diexport, tapi pada akhirnya hasilnya sama aja. Satu hal yang menarik dari ini adalah jadwalnya diawali sama hari minggu dan diakhiri juga sama hari minggu. Total hari di jadwal ini ada 8 hari, bukan 7. Nanti aku jelasin dibawah kenapa nya.

Selesai bikin jadwal, sekarang mulai masuk ke aplikasinya itu sendri. Aplikasi ini dibuat pake React, yaitu framework javascript (technically library tapi yaudah lah ya) dengan tambahan CSSTransition yang diambil dari react-transition-group buat bikin animasi geser dan untuk ngehandle perpindahan halaman. Kenapa React? ya karna itu framework yang paling aku suka. Banyak banget nama nama gede yang pake React, semua web (bahkan aplikasi) Facebook pake React, Tokopedia Shopee Discord dll dkk pake React. Dan aku suka kesimpelan dari React, jadi itulah kenapa sepertinya dari dulu tiap kali ada project yang berhubungan sama gonta-ganti DOM (Document Object Model, intinya isi dari web) pasti selalu pake React. Oiya dan satu hal lagi, di artikel ini aku gak akan bahas styling dll, jadi lebih ke programming nya. Oke kita mulai dari awal, yaitu dari App.js

`gist:Asebodi/169ef2dd7d9db51baa0aeb4137ea25b1#App.js`

Hmm verbose sekali ya bagian switch nya. Oke deh mulai dari paling atas dulu. Jadi pada awalnya kita bikin state pake React Hooks. Dibawahnya, aku deklarasi variabel kosong yang namanya conditionalDetail. Variabel kosong ini nantinya bakal diisi JSX (Object dari React yang mirip mirip sama HTML) dari logic switch dibawahnya. Di dalam function yang aku kasih nama clickHandler, aku nge set state yang tadi dan ngasih logic buat ngeliat kelas mana yang dipilih dari menu di komponen Main.js (yang abis ini bakal aku tunjukin) dan ngatur kelas apa yang bakal ditunjukin ke pengguna lewat komponen Detail.js. Function ini nerima satu argument yang isinya string yang merepresentasikan kelas apa yang pengguna klik. State "currentClass" ini lumayan menarik sih, karena state yang aku bikin ini value nya nggak dipake sama sekali. Satu satunya alesan kenapa state ini ada adalah karna aku pengen React buat rerender tiap kali variabel conditinalDetail ini ganti.

Mungkin kalian tanya, “Lah kenapa gak lansung aja masukin ke state ketimbang pake variabel biasa?” Hmm aku juga baru kepikiran itu sih, dan seharusnya bisa aja pake cara itu. Entahlah kenapa kemaren pas ngoding kepikirannya kayak gini. Selain itu, aku nggak gitu suka dengan cara assignment yang terlalu verbose ini. Mungkin kalian liat yang berubah dari berbagai case itu cuma property “data” nya. Idealnya ini bisa disimpelkan dengan bikin logic yang tinggal output object jadi manggil JSX nya gak perlu berulang-ulang kali begitu, cukup sekali aja. Yaa emang it works sih, tapi nggak enak aja dilihat. Mungkin kedepannya aku bakal coba coba cari cara yang lebih efisien buat ngelakuin hal yang sama disini. Oke lanjut, jadi setelah property “data”, aku juga ngasih property “stateHandler” yang ngerefer ke function yang bentar lagi aku tunjukin. Function ini cuma dipake buat tombol back yang ada di komponen Detail untuk ganti state yang dibutuhin buat navigasi dari si CSSTransition.

Masih di dalem function clickHandler, ada ReactGA yaitu adalah library Google analytics buat React. Ini pertama kali seumur umur aku pernah pake google analytics buat project web, dan ternyata sangat membantu banget buat ngeliat bagian mana dari web yang sering dibuka pengguna, dll dkk. Di sini, aku bikin event tiap kali pengguna ngeklik salah satu kelas, ngasih nama “Class open” dan action yang berisi kelas apa yang dibuka sama pengguna. Dengan ini bisa dilihat berapa jumlah pengguna yang buka kelas apa, dll. Terakhir di function ini, ada setVisible() buat ngatur state yang dipake buat navigasi jadi “detail” supaya CSSTransition bisa jalan dan bisa pindah halaman.

`gist:Asebodi/c5d4a725294afdf33e2216fc063c7a91#App.js`

Ini cuma ngatur state buat navigasi dan inisiasi ReactGA. State ini adalah state yang sama yang diatur di snippet sebelumnya. State ini dibutuhin sama CSSTransition biar bisa jalan. State default “main” di sini adalah biar secara default pengguna ada di komponen menu, bukan di komponen Detail. Komponen Detail itu yang isinya jadwal per kelas, sedangkan komponen Main itu isinya menu buat milih kelas. Untuk inisiasi ReactGa ini dilakuin di dalem useEffect yang kalo di class-based component namanya componentDidMount(). Di sini, aku masukin tracking id yang didapet dari Google Analytics dan ngitung sesi pengguna sebagai page view dari alamat root ("/"). Berhubung aplikasi ini gak ada routing selain root, jadi ya aku cuma ngasih page view di satu tempat ini doang.

`gist:Asebodi/d6c6fb3f4a76d722e7f7f5bce5cd93b2#App.js`

Ini adalah function yang dipake sama tombol back di komponen Detail yang bakal dijelasin bentar lagi. Nantinya function ini bakal diturunin ke komponen Detail lewat props yang mana waktu tombol back dipencet di komponen Detail, bakal manggil function ini dan ganti state "visible" tadi supaya CSSTransition tau buat balik ke halaman utama lagi.

`gist:Asebodi/c1969abd7e6b3a3416183211691fc1c8#App.js`

Nah ini adalah return function dari komponen App. Simpel banget, disini ada wrapper dan komponen CSSTransition nya itu sendiri. Ada dua CSSTransition disini, yang pertama isinya adalah komponen Main, sedangkan yang kedua isinya variabel conditionalDetail yang tadi yang waktu awal buka halaman bakal gak ada isinya dan bakal diisi waktu pengguna ngeklik menu di komponen Main. CSSTransition ini nerima beberapa property. Yang pertama adalah “in”. Ini adalah kondisi yang mendefinisikan kapan kita pengen komponen ini muncul. Dalam contoh ini, aku pengen komponen Main muncul kalo state “visible” tadi value nya adalah “main”, dan variabel conditionalDetail muncul kalo valuenya “detail”. UnmountOnExit adalah properti kalo kita pengen komponennya di unmount dari DOM sewaktu animasinya udah selesai. Jadi komponen yang ada di DOM cuma komponen yang berguna buat pengguna. Timeout itu durasi animasinya, mau seberapa lama jalannya animasi.

Paling terakhir, classNames. Inget, ini beda sama className yang biasanya buat ngatur class dari elemen JSX. Ini classNames, ada “s” nya di akhir, dan ini property punya nya CSSTransition sendiri. Jadi cara kerjanya CSSTransition adalah merka ngasih class ke elemen sendiri waktu dirender. Sebenernya ada beberapa, tapi yang aku pake di app ini ada 4, yaitu app-main-enter, app-main-enter-active, app-main-exit, dan app-main-exit-active. Perhatiin semua class tadi awalnya adalah app-main, karna property classNames ini jadi nama template yang bakal digenerate si CSSTransition. buat yang komponen detail, semua nama class nya juga bakal dimulai dari “app-detail” karna emang template yang diatur isinya itu. Class ini kemudian dibawa ke CSS buat dikasih animasinya. Hal terakhir disini adalah aku nurunin function clickHandler di snippet atas tadi ke komponen Main lewat property. Nantinya function clickHandler bakal dipanggil lewat komponen Main.

`gist:Asebodi/a45b7a8169b82bab2bf2b187aa7ad89a#style.scss`

Tadi aku bilang kalo di artikel ini gak bakal bahas styling, jadi singkat aja. Ini adalah CSS (yang sebenernya adalah SCSS tapi di contoh ini gak ada bedanya sama CSS biasa) buat menggeser view dari komponen Main itu tadi. Sewaktu komponen mau keluar (dalam konteks misal pengguna milih salah satu kelas yang mau dilihat jadwalnya), dia bakal dikasih class app-main-exit dimana aku nyuruh komponen buat jadi position absolute (biar bisa geser) dan kemudian app-main-exit-active dimana aku nyurus komponen ini untuk geser ke kiri 100% dan pake animasi selama 500ms sesuai sama timeout yang udah diatur di CSSTransition. Untuk sewaktu komponen mau masuk lagi (Konteks misal pengguna mencet tombol kembali), semuanya sama tapi kebalikannya. Komponen geser ke kanan, bukan ke kiri.

`gist:Asebodi/140d525351f942864ca321abb8f1dd47#Main.js`

Ini adalah komponen Main yang sebenernya lumayan simpel. Sebagian besar cuma HTML biasa. Di app ini, aku milih buat nulis menu per semesternya satu satu ketimbang dipecah jadi komponen yang lebih kecil. Karena ada yang gak reguler di menunya. Semester 2 ada 3 kelas sedangkan sisanya cuma ada 2 kelas. Sebenernya bisa kalo mau mikir dikit, misalnya pake props buat ngatur berapa jumlah kelas yang ditampilin, tapi aku rada males dan pengen biar app nya cepet jadi. Toh gak ngaruh ke performa atau apapun. Inget di atas aku ngomong function clickHandler dipanggil di komponen Main? Nah, di sini di elemen `<div>` yang isinya kelas, aku kasih onClick event yang manggil function clickHandler lewat props. Sedikit pengingat, kalo naroh function ke event ga boleh dipanggil langsung (misal: onClick={clickHandler()} karna itu berarti functionnya langsung jalan, atau kalo function nya berhubungan sama ngatur state, bakal rerender tanpa henti. kalo butuh naroh argumen waktu manggil functionnya, pake arrow function kaya di snippet atas. Di sini, aku manggil function tadi dengan argumen kelas apa yang dipilih pengguna, jadi function nya tau mana yang dipilih dan ngupdate variabel conditionalDetail tadi sesuai sama apa yang dipilih.

`gist:Asebodi/1b72a52fd7ba4839086ed77d53d651ae#Detail.js`

Nah mulai ke hal yang rada ribet nih. Komponen Detail dimulai dari bikin state currentDay dengan default value “today” yang digunain buat CSSTransition, dan state isTomorrow yang digunain buat logic nampilin jadwal hari apa yang ditunjukin. Dibawahnya ada array (list) berisi nama-nama bulan di bahasa Indonesia. Ini dipake buat Date.getMonth() yang bakal ngeluarin bulan sekarang dalam bentuk angka (format zero-based, yang artinya perhitungan angka dimulai dari 0, bukan 1) yang kemudian bakal dikonversi jadi tulisan yang ada di list itu. dibawahnya lagi ada variabel buat ngambil waktu pada saat aplikasinya dibuka, masukin Date object ke variabel today dan bikin variabel tomorrow buat nyimpen nilai buat hari besok nya. Dibawahnya lagi adalah buat konversi Date object tadi jadi tulisan yang bisa dibaca dengan enak. Di variabel dateToday, aku nyimpen nama hari, dan tanggal lengkap dalam bentuk tulisan yang siap disajikan ke pengguna. Variabel schToday berisi data semua kelas di hari itu berdasarkan hari yang didapetin dari vaeiabel today. Variabel today ini hasil dari Date.getDay() yang bakal output hari saat itu dalam bentuk angka yang bersifat zero based dimulai dari hari minggu. Angka inilah yang kemudian dipake buat nyari data kelas di list data yang dikasih ke komponen ini lewat props. Sedangkan variabel classToday ngelihat berapa isi dari array schToday.

Mungkin kalian ngeh kalo ada dua set data, untuk hari ini dan untuk hari besoknya. Sekali lagi, ini salah satu aspek yang aku ngerasa bisa dibikin lebih efisien lagi, tapi bingung mau digimanain lagi. Aku bisa aja ganti tulisan jadwal langsung di DOM, tapi yang aku pengenin adalah bisa ada animasi geser pake CSSTransition itu tadi, sedangkan CSSTransition butuh kedua komponen itu tadi (hari ini sama besok) buat dipisahin biar bisa jalan. Alhasil mau gak mau aku harus bikin dua komponen buat masing-masing hari. Data yang dibikin buat hari besok itu sama persis sama hari ini, cuma ditambah 1 buat beberapa data nya, kayak tanggal, dll. Inget kenapa data jadwal yang tadi aku liatin di atas dimulai dari minggu dan diakhiri minggu juga? Ya ini karena penambahan hari yang dipake buat komponen hari besok tadi. Bayangin kalo misal minggu value nya 0, ditambah 1 buat komponen besok valuenya bakal berubah jadi 1 yang berarti senen. Gitu terus sampe akhirnya value nya 6 yang berarti sabtu. Nah kalo 6 ini ditambah kan jadi 7, padahal harusnya data cuma berhenti sampe 6 (karena inget ini zero-based, kalo angkanya 6 berarti jumlahnya 7, angkanya 7 jumlahnya 8. Jumlah hari dalam satu minggu cuma ada 7 hari) akhirnya yaudah deh biar ga crash programnya dan ga usah ribet ribet bikin logic buat ngehandle hari sabtu, bikin aja data jadwalnya jumlahnya 8. Kan simpel.

`gist:Asebodi/f92f01999b3c21e5c6749b6e7b2130b0#Detail.js`

Variabel schToday dan schTomorrow di atas cuma bakal keisi kalo ada kelas di hari itu. Gimana kalo gak ada kelas? Ya kosong dianya, gak ada isinya. Di momen inilah kedua variabel di atas masuk. Kalo dia detect variabel hari yang dikasih adalah 0 (hari minggu asli), 6 (hari sabtu asli), atau 7 (hari minggu hasil tambahan) maka dia bakal nge-output tulisan kalo hari ini gak ada kelas. Kalo bukan hari-hari diatas ya dia juga gak bakal nge-output apa-apa. Komponen NoClass diatas merujuk ke komponen di bawah ini.

`gist:Asebodi/dccc5fcb1008454d27fcbae039a220b0#NoClass.js`

Komponen ini cuma nyimpen apa yang harus dirender ketika nggak ada kelas. Logic nya gak ada di sini tapi di komponen atas barusan. Ini cuma buat nampilin isinya aja.

`gist:Asebodi/842d8bf7092a013ee2aadcdf20bf2f90#Detail.js`

Ini adalah bagian dimana variabel schToday dan schTomorrow tadi “dimasak” biar siap disajikan ke pengguna. Inget variabel tadi itu masih mentahan dari data, belom siap saji. Pada intinya, untuk setiap item di kedua variabel tadi, bakal dibikin array baru yang isinya adalah elemen `<li>`. Tiap elemen `<li>` ini adalah satu item kelas yang dilihat pengguna. Data “id” dari data kelas juga dipake buat counter kelas dan untuk property “key” di tiap list item karena kalo enggak React bakal ngambek.

`gist:Asebodi/d55c49b837bc531c31c52565f8e294ef#Detail.js`

ClickHandler ini dipake buat ganti state yang tadi dipake buat CSSTransition. Function ini yang bakal jalan waktu pengguna mencet tombol buat ganti hari.

`gist:Asebodi/4709404a0c3e1e96dfc9556aaa102fad#Detail.js`

Nah sekarang mulai masuk ke return function dari komponen Detail. Mulai dari navigasi dulu. JSX diatas adalah elemen `<nav>` dengan gambar svg yang dijadiin tombol dengan onclick yang menuju ke function stateHandler. Function ini yang tadi aku tunjukin di App.js.

`gist:Asebodi/b0187c99531859aef4509c08938d73c4#Detail.js`

Disini aku nunjukin informasi dari kelas, berupa dua tulisan yaitu tulisan semester dan tulisan kelas. Sekali lagi, kedua tulisan tadi diambil dari data yang dibagiin lewat props dari App.js. Disini juga ada bagian untuk ngehandle sistem pemilihan hari. Pada intinya, dia ngelihat apakah state isTomorrow yang tadi aku liatin punya value true atau false. Kalo true (yang berarti tombol buat ganti hari diklik), dia bakal ngasih class yang active ke tulisan “Besok”, tapi kalo false class active nya bakal dikasih ke tulisan “Hari ini” dan tulisan “Besok” nya jadi passive. Class ini dipake cuma buat styling, untuk animasi, opacity, dan tebel tulisan tergantung mana yang dipilih sama pengguna. Selain itu, sewaktu diklik, si tombol ini bakal ngganti state dari clickHandler yang aku tunjukin tadi supaya CSSTransition bisa jalan dan ganti tampilannya sesuai apa yang dipilih oleh pengguna. State isTomorrow juga diganti value nya, entah true atau false tergantung tombol apa yang dipilih pengguna.

`gist:Asebodi/a823b9e25eea1f48e7eaaffb9612be34#Detail.js`

Ini adalah bagian terakhir dari return function di komponen Detail. Ini juga mirip banget sama yang kita liat di App.js tadi, karena ya emang sama persis. Cara kerjanya sama, tapi yang disini sedikit lebih simpel. Lebih simpel karna kita nggak perlu ngerender komponen secara conditionally kayak di App.js tadi. Semuanya udah siap saji, tinggal ditampilin buat pengguna.

Di dalem `<div>` dengan class "date-wrapper", aku nampilin jumlah kelas dalam satu hari itu yang tadi udah aku simpen di variabel classToday, dan aku juga nampilin tulisan hari dan tanggal yang udah siap saji di variabel dateToday. Di dalem `<section>` dengan class "semester-class", aku masukin dua komponen, yaitu holidayToday dan classListToday. Inget, holidayToday cuma bakal muncul kalo hari sabtu atau minggu dan gak bakal muncul di hari lainnya, dan classListToday cuma bakal muncul kalo ada kelas di hari itu. classListToday itu tadi aku masukin ke elemen unordered list karena tiap-tiap item dari classListToday adalah elemen list item. Tiap-tiap step di atas juga sama persis di komponen buat hari besoknya, dengan perubahan di property "in" di CSSTransition yang beda, dan perbedaan variabel yang di-refer di elemen JSX nya.

Udah sih, secara keseluruhan itu semua cara kerja aplikasi Jadwal Pemadatan yang aku bikin minggu lalu. Sebenernya aku pengen banget buat bikin sistem notifikasi, dimana pengguna bisa "langganan" notifikasi buat salah satu kelas dan dapet notifikasi tiap 15 menit sebelum kelas mulai. Tapi sumpah ternyata ribet banget, dan butuh lumayan banyak pekerjaan back-end dan utak atik service-worker yang aku belum terlalu familiar. Mungkin abis ini bakal belajar back-end biar di project-project kedepanya bisa tinggal implementasiinnya. Kalo kalian mau liat source code yang beneran source code (yang tadi itu cuma Github Gist, cuma potongan dari source code aslinya) ada di https://github.com/Asebodi/jadwal-pemadatan. Sepertinya artikel ini udah panjang banget, jadi aku sudahin aja disini. Terimakasih udah membaca!
